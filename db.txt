USE szzsip;

CREATE TABLE `user` (
    id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    username varchar(10) NOT NULL,
    firstname VARCHAR(30),
    lastname VARCHAR(30),
    company_name VARCHAR(100),
    phone varchar(45),
    password_hash varchar(255),
    password_reset_token varchar(255),
    email VARCHAR(50) NOT NULL,
    auth_key varchar(255),
    status enum('active', 'deleted', 'locked'),
    created_at TIMESTAMP,
    updated_at TIMESTAMP,
    group_id int,
    type enum('admin', 'supervisor','serviceman', 'client')
);

CREATE TABLE `group` (
    id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(30),
    status enum('active', 'deleted', 'locked'),
    created_at TIMESTAMP,
    updated_at TIMESTAMP,
    owner_id INT(6) UNSIGNED
);

CREATE TABLE `project` (
    id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100),
    owner_id INT(6) UNSIGNED,
    client_id INT(6) UNSIGNED,
    created_at TIMESTAMP,
    updated_at TIMESTAMP,
    status enum('new', 'in progress', 'closed')
);

CREATE TABLE `order` (
    id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100),
    owner_id INT(6) UNSIGNED,
    executive_id INT(6) UNSIGNED,
    client_id INT(6) UNSIGNED,
    created_at TIMESTAMP,
    updated_at TIMESTAMP,
    status enum('new', 'in progress', 'closed'),
    project_id INT(6) UNSIGNED
);

CREATE TABLE `project_order` (
    id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    order_id INT(6) UNSIGNED,
    project_id INT(6) UNSIGNED
);

CREATE TABLE `task` (
    id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100),
    status enum('active', 'deleted')
);

CREATE TABLE `order_task` (
    id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    order_id INT(6) UNSIGNED,
    task_id INT(6) UNSIGNED
);